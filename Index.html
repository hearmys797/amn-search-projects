<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amn Search API</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 1.1em;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            display: none;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .loading {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .instructions {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            color: #333;
        }
        
        .instructions ol {
            margin-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .code {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Amn Search API</h1>
            <p>–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Amn Search API</p>
        </div>
        
        <div class="form-group">
            <label for="apiUrl">URL API —Å–µ—Ä–≤–µ—Ä–∞:</label>
            <input type="text" id="apiUrl" placeholder="https://your-server.com">
            <small style="color: #666;">–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å API</small>
        </div>

        <div class="form-group">
            <label for="apiToken">API –¢–æ–∫–µ–Ω:</label>
            <input type="text" id="apiToken" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API —Ç–æ–∫–µ–Ω">
            <small style="color: #666;">–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞</small>
        </div>

        <div class="form-group">
            <label for="query">–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:</label>
            <textarea id="query" placeholder="–í–≤–µ–¥–∏—Ç–µ email, –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞"></textarea>
        </div>

        <div>
            <button class="btn" onclick="search()">üîç –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫</button>
            <button class="btn btn-secondary" onclick="getStatus()">üìä –°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞</button>
            <button class="btn btn-secondary" onclick="testApi()">üß™ –¢–µ—Å—Ç API</button>
        </div>

        <div id="result" class="result"></div>
        
        <div class="instructions">
            <h3>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:</h3>
            <ol>
                <li><strong>–ü–æ–ª—É—á–∏—Ç–µ API —Ç–æ–∫–µ–Ω:</strong> —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞ –≤ –º–µ–Ω—é "API"</li>
                <li><strong>–£–∫–∞–∂–∏—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞:</strong> –∞–¥—Ä–µ—Å –≥–¥–µ –∑–∞–ø—É—â–µ–Ω –≤–∞—à –±–æ—Ç —Å API</li>
                <li><strong>–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å:</strong> email, –Ω–æ–º–µ—Ä –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞</li>
                <li><strong>–ù–∞–∂–º–∏—Ç–µ "–í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫":</strong> –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</li>
            </ol>
            
            <div class="code">
// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ JavaScript<br>
const response = await fetch('https://your-server.com/api/search', {<br>
&nbsp;&nbsp;method: 'POST',<br>
&nbsp;&nbsp;headers: {'Content-Type': 'application/json'},<br>
&nbsp;&nbsp;body: JSON.stringify({<br>
&nbsp;&nbsp;&nbsp;&nbsp;token: '–í–ê–®_–¢–û–ö–ï–ù',<br>
&nbsp;&nbsp;&nbsp;&nbsp;query: '–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å'<br>
&nbsp;&nbsp;})<br>
});
            </div>
        </div>
    </div>

    <script>
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ localStorage
        function saveSettings() {
            const apiUrl = document.getElementById('apiUrl').value;
            const apiToken = document.getElementById('apiToken').value;
            
            if (apiUrl) localStorage.setItem('amn_api_url', apiUrl);
            if (apiToken) localStorage.setItem('amn_api_token', apiToken);
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ localStorage
        function loadSettings() {
            const savedUrl = localStorage.getItem('amn_api_url');
            const savedToken = localStorage.getItem('amn_api_token');
            
            if (savedUrl) document.getElementById('apiUrl').value = savedUrl;
            if (savedToken) document.getElementById('apiToken').value = savedToken;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞
        async function search() {
            saveSettings();
            
            const apiUrl = document.getElementById('apiUrl').value;
            const apiToken = document.getElementById('apiToken').value;
            const query = document.getElementById('query').value;
            const resultDiv = document.getElementById('result');

            if (!apiUrl) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ URL API —Å–µ—Ä–≤–µ—Ä–∞', 'error');
                return;
            }
            
            if (!apiToken) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ API —Ç–æ–∫–µ–Ω', 'error');
                return;
            }
            
            if (!query) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å', 'error');
                return;
            }

            try {
                showResult('‚è≥ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–∏—Å–∫...', 'loading');
                
                const response = await fetch(`${apiUrl}/api/search`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        token: apiToken,
                        query: query
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    showResult(`‚úÖ –£—Å–ø–µ—à–Ω—ã–π –ø–æ–∏—Å–∫!\n\n–ó–∞–ø—Ä–æ—Å: ${data.query}\n\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:\n${data.result}`, 'success');
                } else {
                    showResult(`‚ùå –û—à–∏–±–∫–∞: ${data.error}`, 'error');
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}\n\n–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:\n‚Ä¢ URL API —Å–µ—Ä–≤–µ—Ä–∞\n‚Ä¢ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞\n‚Ä¢ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ`, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
        async function getStatus() {
            saveSettings();
            
            const apiUrl = document.getElementById('apiUrl').value;
            const apiToken = document.getElementById('apiToken').value;
            const resultDiv = document.getElementById('result');

            if (!apiUrl) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ URL API —Å–µ—Ä–≤–µ—Ä–∞', 'error');
                return;
            }
            
            if (!apiToken) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ API —Ç–æ–∫–µ–Ω', 'error');
                return;
            }

            try {
                showResult('‚è≥ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞...', 'loading');
                
                const response = await fetch(`${apiUrl}/api/status?token=${apiToken}`);
                const data = await response.json();
                
                if (data.success) {
                    showResult(`üìä –°—Ç–∞—Ç—É—Å –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞:\n\nüë§ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${data.user_id}\nüìä –ó–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ –±–æ—Ç–∞: ${data.total_requests}\nüîó –ó–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ API: ${data.api_requests}\nüìà –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: ${data.total_requests + data.api_requests}\n‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª: ${data.subscription ? '–∞–∫—Ç–∏–≤–Ω–∞' : '–Ω–µ –∞–∫—Ç–∏–≤–Ω–∞'}`, 'success');
                } else {
                    showResult(`‚ùå –û—à–∏–±–∫–∞: ${data.error}`, 'error');
                }
            } catch (error) {
                showResult(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
        async function testApi() {
            const apiUrl = document.getElementById('apiUrl').value;
            const resultDiv = document.getElementById('result');

            if (!apiUrl) {
                showResult('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ URL API —Å–µ—Ä–≤–µ—Ä–∞', 'error');
                return;
            }

            try {
                showResult('‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å API...', 'loading');
                
                const response = await fetch(`${apiUrl}/api/test`);
                const data = await response.json();
                
                if (data.success) {
                    showResult(`‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!\n\n–°–æ–æ–±—â–µ–Ω–∏–µ: ${data.message}\n–í–µ—Ä—Å–∏—è: ${data.version || '1.0'}`, 'success');
                } else {
                    showResult(`‚ùå API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ`, 'error');
                }
            } catch (error) {
                showResult(`‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API: ${error.message}`, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showResult(message, type) {
            const resultDiv = document.getElementById('result');
            resultDiv.textContent = message;
            resultDiv.className = 'result ' + type;
            resultDiv.style.display = 'block';
        }

        // –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
        });
    </script>
</body>
</html>
